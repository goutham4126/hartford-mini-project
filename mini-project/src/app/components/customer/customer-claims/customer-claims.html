<!-- BLOCK ONLY ON CLAIMS -->
@if (!claims) {
  <div class="text-center text-gray-500 p-6">
    Fetching claims...
  </div>
}

@if (claims) {
  <div class="min-h-screen bg-gray-100 p-6">
    <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow p-6">

      <h2 class="text-xl font-bold text-gray-800 mb-4">
        My Claims
      </h2>

      <!-- NO CLAIMS -->
      @if (claims.length === 0) {
        <p class="text-gray-500 text-center">
          No claims found.
        </p>
      }

      <!-- CLAIMS TABLE -->
      @if (claims.length > 0) {
        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100 text-left text-sm text-gray-600">
                <th class="p-3">#</th>
                <th class="p-3">Policy Name</th>
                <th class="p-3">Amount</th>
                <th class="p-3">Status</th>
              </tr>
            </thead>

            <tbody>
              @for (claim of claims; let i = $index; track claim.id) {
                <tr class="border-t hover:bg-gray-50">

                  <!-- SERIAL -->
                  <td class="p-3">{{ i + 1 }}</td>

                  <!-- POLICY NAME (NON-BLOCKING) -->
                  <td class="p-3 font-medium text-gray-800">
                    {{ policyNameMap[claim.policyId]}}
                  </td>

                  <!-- AMOUNT -->
                  <td class="p-3">â‚¹{{ claim.amount }}</td>

                  <!-- STATUS -->
                  <td class="p-3">
                    <span
                      class="px-3 py-1 rounded-full text-sm font-medium"
                      [class.bg-yellow-100]="claim.status === 'pending'"
                      [class.text-yellow-700]="claim.status === 'pending'"
                      [class.bg-green-100]="claim.status === 'approved'"
                      [class.text-green-700]="claim.status === 'approved'"
                      [class.bg-red-100]="claim.status === 'rejected'"
                      [class.text-red-700]="claim.status === 'rejected'"
                    >
                      {{ claim.status }}
                    </span>
                  </td>

                </tr>
              }
            </tbody>
          </table>
        </div>
      }

    </div>
  </div>
}
