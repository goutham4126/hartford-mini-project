<!-- BLOCK ONLY ON POLICIES -->
@if (!policies) {
  <div class="text-center text-gray-500 p-6">
    Fetching policies...
  </div>
}

@if (policies) {
  <div class="min-h-screen bg-gray-100 p-6">
    <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow p-6">

      <h2 class="text-xl font-bold text-gray-800 mb-4">
        My Policies
      </h2>

      <!-- NO POLICIES -->
      @if (policies.length === 0) {
        <p class="text-gray-500 text-center">
          No policies found.
        </p>
      }

      <!-- POLICIES TABLE -->
      @if (policies.length > 0) {
        <div class="overflow-x-auto">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-gray-100 text-left text-sm text-gray-600">
                <th class="p-3">#</th>
                <th class="p-3">Policy Name</th>
                <th class="p-3">Type</th>
                <th class="p-3">Coverage</th>
                <th class="p-3">Duration</th>
                <th class="p-3">Premium</th>
                <th class="p-3">Status</th>
              </tr>
            </thead>

            <tbody>
              @for (policy of policies; let i = $index; track policy.id) {
                <tr class="border-t hover:bg-gray-50">

                  <td class="p-3">{{ i + 1 }}</td>

                  <td class="p-3 font-medium text-gray-800">
                    {{ policy.name }}
                  </td>

                  <td class="p-3 capitalize">
                    {{ policy.type }}
                  </td>

                  <!-- COVERAGE -->
                  <td class="p-3">
                    ₹{{ policy.coverage | number }}
                  </td>

                  <!-- DURATION IN YEARS -->
                  <td class="p-3">
                    {{ getYears(policy.duration) }} years
                  </td>

                  <td class="p-3">
                    ₹{{ policy.premium }}
                  </td>

                  <td class="p-3">
                    <span
                      class="px-3 py-1 rounded-full text-sm font-medium"
                      [class.bg-green-100]="policy.status === 'active'"
                      [class.text-green-700]="policy.status === 'active'"
                      [class.bg-red-100]="policy.status === 'inactive'"
                      [class.text-red-700]="policy.status === 'inactive'"
                    >
                      {{ policy.status }}
                    </span>
                  </td>

                </tr>
              }
            </tbody>
          </table>
        </div>
      }

    </div>
  </div>
}
